<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Pamplemouche ID</title>
    <style>
        body { background: #000; margin: 0; font-family: -apple-system, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; }
        
        /* ALERTE IOS SIMUL√âE */
        #ios-alert-bg { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 100; }
        .ios-alert { width: 270px; background: rgba(245,245,245,0.9); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 14px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        .ios-content { padding: 20px; border-bottom: 0.5px solid #bbb; }
        .ios-btns { display: flex; }
        .ios-btn { flex: 1; padding: 12px; background: none; border: none; color: #007aff; font-size: 17px; cursor: pointer; }
        
        /* INTERFACE EPIC GAMES */
        #epic-ui { display: none; width: 100%; max-width: 360px; background: #121212; padding: 40px; border: 1px solid #333; text-align: center; border-radius: 4px; }
        .epic-logo { font-size: 40px; margin-bottom: 15px; }
        input { width: 100%; padding: 15px; margin: 10px 0; background: #2a2a2a; border: 1px solid #444; color: #fff; font-size: 14px; box-sizing: border-box; border-radius: 4px; }
        .btn-epic { width: 100%; padding: 15px; background: #007aff; color: #fff; border: none; font-weight: bold; text-transform: uppercase; cursor: pointer; margin-top: 15px; }
        .btn-switch { color: #888; font-size: 12px; margin-top: 20px; background: none; border: none; text-decoration: underline; cursor: pointer; }
        #error { color: #ff4545; font-size: 12px; margin-top: 10px; text-transform: uppercase; }
    </style>
</head>
<body>

    <div id="ios-alert-bg">
        <div class="ios-alert">
            <div class="ios-content">
                <b style="font-size:17px">"PampleMail" souhaite utiliser "pamplemoucheid.com" pour se connecter</b><br>
                <span style="font-size:13px">Cela permet √† l‚Äôapplication et au site web de partager des informations vous concernant.</span>
            </div>
            <div class="ios-btns">
                <button class="ios-btn" onclick="window.location.href='hub.html'">Annuler</button>
                <button class="ios-btn" style="font-weight:600" onclick="showEpic()">Continuer</button>
            </div>
        </div>
    </div>

    <div id="epic-ui">
        <div class="epic-logo">üçä</div>
        <h2 id="epic-title" style="color:white; font-size:14px; letter-spacing:2px; margin-bottom:20px;">SE CONNECTER</h2>
        <input type="email" id="email" placeholder="ADRESSE E-MAIL">
        <input type="password" id="pass" placeholder="MOT DE PASSE">
        <button class="btn-epic" id="btnAuth">Se connecter maintenant</button>
        <button class="btn-switch" id="btnMode">Pas de compte ? S'inscrire</button>
        <div id="error"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";

        // COPIE TES CL√âS ICI
        const firebaseConfig = {
            apiKey: "AIzaSyB7rdwaFDFrjHkT_Q8g7HdJQmOe13wNCao",
  authDomain: "mail-pamplemouche.firebaseapp.com",
  projectId: "mail-pamplemouche",
  storageBucket: "mail-pamplemouche.firebasestorage.app",
  messagingSenderId: "892041516568",
  appId: "1:892041516568:web:aa9fb6a1a02bfe5e01156d",
  measurementId: "G-9FFK35CVCL"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        let isLoginMode = true;

        window.showEpic = () => {
            document.getElementById('ios-alert-bg').style.display = 'none';
            document.getElementById('epic-ui').style.display = 'block';
        };

        document.getElementById('btnMode').onclick = () => {
            isLoginMode = !isLoginMode;
            document.getElementById('epic-title').innerText = isLoginMode ? "SE CONNECTER" : "S'INSCRIRE";
            document.getElementById('btnMode').innerText = isLoginMode ? "Pas de compte ? S'inscrire" : "D√©j√† un compte ? Se connecter";
        };

        document.getElementById('btnAuth').onclick = async () => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;
            try {
                if(isLoginMode) await signInWithEmailAndPassword(auth, email, pass);
                else await createUserWithEmailAndPassword(auth, email, pass);
                window.location.replace("mail.html");
            } catch(e) { document.getElementById('error').innerText = "Erreur : " + e.code; }
        };
    </script>
</body>
</html>
